<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Pyminion | evanslack.dev</title>
<meta name="keywords" content="Python, Pytest">
<meta name="description" content="Dominion game engine, simulator and AI builder written in Python">
<meta name="author" content="">
<link rel="canonical" href="https://evanslack.dev/pyminion">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css" integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://evanslack.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://evanslack.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://evanslack.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://evanslack.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://evanslack.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://evanslack.dev/" accesskey="h" title="evanslack.dev (Alt + H)">evanslack.dev</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://evanslack.dev/" title="home">
                    <span>home</span>
                </a>
            </li>
            <li>
                <a href="https://evanslack.dev/about/" title="about">
                    <span>about</span>
                </a>
            </li>
            <li>
                <a href="https://evanslack.dev/projects/" title="projects">
                    <span>projects</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://evanslack.dev/">Home</a>&nbsp;»&nbsp;<a href="https://evanslack.dev/projects/">Projects</a></div>
    <h1 class="post-title">
      Pyminion
    </h1>
    <div class="post-meta">

</div>
  </header> 
  <div class="post-content"><p><a href="https://pypi.org/project/pyminion/">pypi.org/project/pyminion</a>
   |   
<a href="https://github.com/evanofslack/pyminion">github</a></p>
<h2 id="about">About<a hidden class="anchor" aria-hidden="true" href="#about">#</a></h2>
<p>Pyminion is a library for executing and analyzing games of <a href="https://www.riograndegames.com/games/dominion/">Dominion</a>. At its core, pyminion implements the rules and logic of Dominion and provides an API to interact with the game engine. In addition, it enables interactive games through the command line and simulation of games between bots.</p>
<h2 id="design">Design<a hidden class="anchor" aria-hidden="true" href="#design">#</a></h2>
<p>Pyminion heavily relies on object oriented paradigms with inheritance and composition.</p>
<p>There is a base <code>player</code> class from which both <code>human</code> and <code>bot</code> are derived. The <code>bot</code> class in particular is designed to be extendable by users to create new AI variations. All unique cards in the package are derived from the abstract <code>card</code> class, from which the <code>action</code>, <code>treasure</code> and <code>victory</code> implementations are created. State is stored in a singleton <code>game</code> instance, which is then accessed by players/bots as they take their turns.</p>
<p>Currently, reactions to events such as attacks are hardcoded. In the future, it would be great to implement an callback system into the game engine which would make the handling of these sort of interrupts more extendable.</p>
<h2 id="example">Example<a hidden class="anchor" aria-hidden="true" href="#example">#</a></h2>
<p>Pyminion requires at least Python 3.8 and can easily be installed through pypi</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 -m pip install pyminion
</span></span></code></pre></div><p>To play an interactive game through the command line against a bot, initialize a human and a bot and assign them as players. Alternatively, games can be created between multiple humans or multiple bots.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.expansions.base <span style="color:#f92672">import</span> base_set 
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.game <span style="color:#f92672">import</span> Game
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.bots.examples <span style="color:#f92672">import</span> BigMoney
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.players <span style="color:#f92672">import</span> Human
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize human and bot</span>
</span></span><span style="display:flex;"><span>human <span style="color:#f92672">=</span> Human()
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> BigMoney()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Setup the game</span>
</span></span><span style="display:flex;"><span>game <span style="color:#f92672">=</span> Game(players<span style="color:#f92672">=</span>[human, bot], expansions<span style="color:#f92672">=</span>[base_set])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Play game</span>
</span></span><span style="display:flex;"><span>game<span style="color:#f92672">.</span>play()
</span></span></code></pre></div><h3 id="creating-bots">Creating Bots<a hidden class="anchor" aria-hidden="true" href="#creating-bots">#</a></h3>
<p>Defining new bots is relatively straightforward. Inherit from the <code>Bot</code> class and implement play and buy strategies in the <code>action_priority</code> and <code>buy_priority</code> methods respectively.</p>
<p>For example, here is a simple big money + smithy bot:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.bots.bot <span style="color:#f92672">import</span> Bot
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.game <span style="color:#f92672">import</span> Game
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.expansions.base <span style="color:#f92672">import</span> silver, gold, province, smithy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BigMoneySmithy</span>(Bot):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(
</span></span><span style="display:flex;"><span>        self,
</span></span><span style="display:flex;"><span>        player_id: str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;big_money_smithy&#34;</span>,
</span></span><span style="display:flex;"><span>    ):
</span></span><span style="display:flex;"><span>        super()<span style="color:#f92672">.</span>__init__(player_id<span style="color:#f92672">=</span>player_id)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">action_priority</span>(self, game: Game):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> smithy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">buy_priority</span>(self, game: Game):
</span></span><span style="display:flex;"><span>        money <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>state<span style="color:#f92672">.</span>money
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> money <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">8</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> province
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> money <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">6</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> gold
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> money <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> smithy
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> money <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> silver
</span></span></code></pre></div><h3 id="running-simulations">Running Simulations<a hidden class="anchor" aria-hidden="true" href="#running-simulations">#</a></h3>
<p>Simulating multiple games is good metric for determining bot performance. To create a simulation, pass a pyminion game instance into the <code>Simulator</code> class and set the number of iterations to be run.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.bots.examples <span style="color:#f92672">import</span> BigMoney, BigMoneySmithy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.expansions.base <span style="color:#f92672">import</span> base_set, smithy
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.game <span style="color:#f92672">import</span> Game
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyminion.simulator <span style="color:#f92672">import</span> Simulator
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bm <span style="color:#f92672">=</span> BigMoney()
</span></span><span style="display:flex;"><span>bm_smithy <span style="color:#f92672">=</span> BigMoneySmithy()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>game <span style="color:#f92672">=</span> Game(players<span style="color:#f92672">=</span>[bm, bm_smithy], expansions<span style="color:#f92672">=</span>[base_set], kingdom_cards<span style="color:#f92672">=</span>[smithy])
</span></span><span style="display:flex;"><span>sim <span style="color:#f92672">=</span> Simulator(game, iterations<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>)
</span></span><span style="display:flex;"><span>sim<span style="color:#f92672">.</span>run()
</span></span></code></pre></div><p>with the following terminal output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>~$ python simulation.py
</span></span><span style="display:flex;"><span>Simulation of 1000 games
</span></span><span style="display:flex;"><span>big_money wins: 16.8% (168)
</span></span><span style="display:flex;"><span>big_money_smithy wins: 57.5% (575)
</span></span><span style="display:flex;"><span>Ties: 25.7% (257)
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://evanslack.dev/tags/python/">Python</a></li>
      <li><a href="https://evanslack.dev/tags/pytest/">Pytest</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://evanslack.dev/projects/macropad/">
    <span class="title">« Prev</span>
    <br>
    <span>MacroPad</span>
  </a>
  <a class="next" href="https://evanslack.dev/projects/rocketchat/">
    <span class="title">Next »</span>
    <br>
    <span>Rocket.Chat SDK</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://evanslack.dev/">evanslack.dev</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
